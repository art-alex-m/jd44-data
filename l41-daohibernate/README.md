<!-- TOC -->
* [Задача «Слой DAO c Hibernate»](#задача-слой-dao-c-hibernate)
* [Задача «Слой DAO c JPA Repositories»](#задача-слой-dao-c-jpa-repositories)
* [Задача «@Query*» (задача со звёздочкой)](#задача-query-задача-со-звёздочкой)
<!-- TOC -->

# Задача «Слой DAO c Hibernate»

## Описание

Попрактикуемся в работе с Hibernate через Spring, параллельно закрепляя уже пройденные темы.

Вам надо написать приложение для работы с БД, используя средства Spring по конфигурации и работе с Hibernate,
адаптировав таблицы из задания [«Таблица пользователей»](../l10_persons/README.md).

**Что нужно сделать**

1. Создайте Spring Boot приложение с зависимостями на два стартера — `spring-boot-starter-data-jpa`
   и `spring-boot-starter-web`.

2. Создайте Entity, которая соответствует таблице из условий
   задачи [«Таблица пользователей»](../l10_persons/README.md).

3. Напишите репозиторий для работы с БД.

    - создайте класс и пометьте его аннотацией Repository, либо создайте бин репозитория в Java Config классе;
    - правильно инжектируйте EntityManager;
    - создайте метод `getPersonsByCity(String city)`, который будет принимать название города и возвращать ваше Entity
      из базы данных, соответствующие этому `city`. Сделать это можно, например, получив всех пользователей и
      отфильтровав их по городу.

4. Напишите контроллер с методом-обработчиком GET-метода запроса с маппингом на endpoint `/persons/by-city`. В query
   params запроса будет приходить строковый параметр `city`, который вам надо будет передавать дальше в репозиторий. То
   есть, ваш метод должен уметь обрабатывать запрос вида `localhost:8080/persons/by-city?city=Moscow`.
   Контроллер должен будет возвращать всех людей, которых он получит от репозитория.

5. Написанные код выложите в отдельный репозиторий на GitHub и прикрепите ссылку на него в комментарий к домашнему
   заданию.

# Задача «Слой DAO c JPA Repositories»

## Описание

Попрактикуемся в работе с JPA Repositories, переписав приложение для работы с
БД [«Слой DAO c Hibernate»](#задача-слой-dao-c-hibernate).

**Что нужно сделать**

1. Перепишите репозиторий для работы с БД на основе методов-запросов:

   - чтобы у вашего репозитория были основные методы для `CRUD` операций;
   - создайте метод, который будет принимать название города (`city`) и возвращать `Entity` из базы данных, которые
     соответствуют этому `city`;
   - создайте метод, который будет принимать возраст (`age`) и возвращать `Entity` из базы данных, которые меньше
     переданного `age` и отсортированы по возрастанию;
   - создайте метод, который будет принимать имя и фамилию (`name` и `surname`) и возвращать `Entity` из базы данных,
     которые соответствуют сочетанию `name` и `surname` и являются `Optional`.

2. Допишите недостающие методы контроллера в соответствии с появившимися новыми методами в репозитории.

3. Написанный код выложите в тот же репозиторий, что и для
   задачи [«Слой DAO c Hibernate»](#задача-слой-dao-c-hibernate) на GitHub, только создайте под него другую
   ветку `jpa-repository` и прикрепите ссылку на неё в комментарий к домашнему заданию.

# Задача «@Query*» (задача со звёздочкой)

## Описание

Эта задача необязательная, её выполнение не влияет на получение зачёта.

Перепишем приложение из [Слой DAO c JPA Repositories](#задача-слой-dao-c-jpa-repositories) на запросы с помощью
аннотации `@Query`.

**Что нужно сделать**

1. Вам необходимо переписать код из [Слой DAO c JPA Repositories](#задача-слой-dao-c-jpa-repositories), чтобы он теперь
   работал не через методы-запросы, а через запросы в аннотации `@Query` и язык `JPQL`.

2. Написанный код выложите в тот же репозиторий, что и для задачи [«Слой DAO c Hibernate»](#задача-слой-dao-c-hibernate)
   на GitHub, только создайте под него другую ветку `jpa-repository-query` и прикрепите ссылку на неё в комментарий к
   домашнему заданию.